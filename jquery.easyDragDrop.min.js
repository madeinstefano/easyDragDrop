(function(a){a.fn.easyDragDrop=function(b){var d={dragStart:function(){},dragEnd:function(){},dragNode:a(),bindType:"bind",targetSet:[],distance:5},c=a.extend({},d,b);c.dragNode=a(c.dragNode);c.distance=c.distance<5?5:c.distance;a.each(c.targetSet,function(f,e){e.target=a(e.target);e.targetEnter=e.targetEnter||function(){};e.targetLeave=e.targetLeave||function(){};e.drop=e.drop||function(){}});if(c.dragNode.size()>1){throw"Drag Node must be unique"}if(!c.dragNode.parent().size()){a("body").append(c.dragNode)}c.dragNode.hide().addClass("drag-node");a(this)[c.bindType]("mousedown.drag",function(f){f.preventDefault();var g=f.pageY-a(window).scrollTop();c.dragNode.css({position:"fixed",top:g+c.distance+"px",left:f.pageX+c.distance+"px",zIndex:99999,display:"block"}).addClass("is-dragging");a("body").css("cursor","move");c.dragStart.call(this,f,c.dragNode);a.each(c.targetSet,function(h,e){var j=false;e.target.live("mouseenter.drop",function(i){if(c.dragNode.hasClass("is-dragging")){e.targetEnter.call(this,i,c.dragNode);j=true}}).live("mouseleave.drop afterdrop",function(i){if(j){e.targetLeave.call(this,i,c.dragNode);j=false}}).live("mouseup.drop",function(i){if(c.dragNode.hasClass("is-dragging")){e.targetLeave.call(this,i);j=false;e.drop.call(this,i,c.dragNode);i.stopImmediatePropagation();a(window).trigger("mouseup.drag")}})});a(window).bind("mousemove.drag",function(h){var i=h.pageY-a(window).scrollTop();c.dragNode.css({top:i+c.distance+"px",left:h.pageX+c.distance+"px"})}).bind("mouseup.drag",function(){a(window).unbind("mousemove.drag mouseup.drag");c.dragEnd.call(this,f,c.dragNode);a("body").css("cursor","auto");a.each(c.targetSet,function(h,e){e.target.die("mouseenter.drop mouseout.drop mouseup.drop afterdrop")});c.dragNode.hide().removeClass("is-dragging")})})}})(jQuery);