(function(b){b.fn.easyDragDrop=function(g){var h={dragStart:function(){},dragEnd:function(){},dragNode:b(),targetSet:[],distance:5},a=b.extend({},h,g);a.dragNode=b(a.dragNode);a.distance=5>a.distance?5:a.distance;b.each(a.targetSet,function(a,c){c.target=b(c.target);c.targetEnter=c.targetEnter||function(){};c.targetLeave=c.targetLeave||function(){};c.drop=c.drop||function(){}});if(1<a.dragNode.size())throw"Drag Node must be unique";a.dragNode.parent().size()||b("body").append(a.dragNode);a.dragNode.hide().addClass("drag-node");
b(document).on("mousedown.drag",b(this).selector,function(d){d.preventDefault();var c=d.pageY-b(window).scrollTop(),e=b(d.target);a.dragNode.css({position:"fixed",top:c+a.distance+"px",left:d.pageX+a.distance+"px",zIndex:99999,display:"block"}).addClass("is-dragging");b("body").css("cursor","move");a.dragStart.call(this,d,a.dragNode,e);b.each(a.targetSet,function(c,f){var d=!1;f.target.on("mouseenter.drop",function(b){a.dragNode.hasClass("is-dragging")&&(f.targetEnter.call(this,b,a.dragNode,e),d=
!0)}).on("mouseleave.drop afterdrop",function(b){d&&(f.targetLeave.call(this,b,a.dragNode,e),d=!1)}).on("mouseup.drop",function(c){a.dragNode.hasClass("is-dragging")&&(f.targetLeave.call(this,c),d=!1,f.drop.call(this,c,a.dragNode,e),c.stopImmediatePropagation(),b(window).trigger("mouseup.drag"))})});b(window).bind("mousemove.drag",function(c){var d=c.pageY-b(window).scrollTop();a.dragNode.css({top:d+a.distance+"px",left:c.pageX+a.distance+"px"})}).bind("mouseup.drag",function(){b(window).unbind("mousemove.drag mouseup.drag");
a.dragEnd.call(this,d,a.dragNode,e);b("body").css("cursor","auto");b.each(a.targetSet,function(a,b){b.target.off("mouseenter.drop mouseout.drop mouseup.drop afterdrop")});a.dragNode.hide().removeClass("is-dragging")})})}})(jQuery);
